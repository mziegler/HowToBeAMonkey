{"version":3,"file":"scripts.js.ugly","sources":["../src/js/map.js","../src/js/mapbubbles.js","../src/js/introscreens.js","../src/js/headercontrols.js"],"names":["initMap","animationLineClipPadding","L","Path","CLIP_PADDING","resetLineClipPadding","initialLineClipPadding","zoomHandle","map","getZoom","closePopup","initialView","maxZoom","zoomControl","attributionControl","maxBounds","latLngBounds","setView","tileLayer","opacity","addTo","polyline","media","cabuyoPoints","color","weight","lineJoin","lineCap","pizotePoints","WHtrack","dashArray","popupWidth","fullWidth","width","mapSize","getSize","x","currentPopup","on","event","popup","options","minWidth","maxWidth","update","hasLayer","control","zoom","position","scale","initMapBubbles","uniqueIDGenerator","uniqueIDCounter","sortBubbles","clusterMarkers","insertRandom","obj","randomIndex","Math","floor","random","sortedBubbles","length","splice","bubbleGroups","picture","video","text","behavior","$","each","i","observation","type","push","category","categoryGroups","g","cats","count","score","cat","observations","group","categories","scoreSum","ob","value","max","min","children","item","renderText","r","padding","container","el","append","attr","split","line","dy","text-anchor","bb","getBBox","height","widthTransform","heightTransform","renderBubbleIcon","bubbleData","G","clipPath","title","d","mapMedia","openTextPopup","this","d3","stopPropagation","uri","openPicture","openBehaviorPopup","bubbleSVG","clusterdata","containerSelection","bubble","layout","pack","sort","size","clusterDiameter","svg","node","selectAll","data","nodes","filter","enter","y","thisNode","select","clipID","loadBubbleMedia","clusterLayer","HexBinLayer","marker","loc","time","registerMarker","pictures","caption","cap","textbubbles","textbubble","addLayer","clusterMargin","hexBinBounds","top","bottom","left","right","Class","extend","initialize","_layout","hexbin","_markers","_el","onAdd","_map","getPanes","overlayPane","_moveend","_reset","onRemove","removeChild","off","_createHexClusters","bounds","getBounds","pad","empty","contains","remove","layerPointToLatLng","point","lng","radius","style","latLngToLayerPoint","getJSON","done","initIntroScreens","closeIntro","fadeOut","skipIntro","headerControls","closeSidePanel","animate","setTimeout","startMarker","openPopup","resetIntro","hide","show","fadeIn","click","DomUtil","addClass","_mapPane","pan","duration","window","removeClass","setZoom","panTo","easeLinearity","initHeaderControls","toggleSidePanel","contentSelector","is","menuButtonOpen","menuButtonClosed","introScreens","mapBubbles"],"mappings":"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"}